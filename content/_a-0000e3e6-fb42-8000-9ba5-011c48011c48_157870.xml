<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e6e2-62e5-8000-9bfe-011c48011c48_2361604</versionUuid>
    <rule>
        <name>AS_CO_UT_queryEntity</name>
        <uuid>_a-0000e3e6-fb42-8000-9ba5-011c48011c48_157870</uuid>
        <description>Helper rule to execute queries with minimal overhead, pass `returnType` based on the query purpose</description>
        <parentUuid>_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73105</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>/*

PLEASE REFER TO THE BOTTOM OF THIS RULE FOR INSTRUCTIONS ON HOW TO USE

Please DO NOT auto-format this rule

*/
/*Error handling for invalid returnType or entityType*/
if(
  #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536"(value: ri!returnType),
  fn!error(
    concat(
      "Null `returnType` passed to AS_CO_UT_queryEntity for entityType `",
      ri!entityType,
      "`.  See documentation in AS_CO_UT_queryEntity for further information on how to use this parameter."
    )
  ),
  not(
    contains(
      #"_a-0000e415-3035-8000-9bb2-011c48011c48_290200"(),
      ri!returnType
    )
  ),
  fn!error(
    concat(
      "Unknown `returnType` (",
      ri!returnType,
      ") passed to AS_CO_UT_queryEntity for entityType `",
      ri!entityType,
      "`.  See documentation in AS_CO_UT_queryEntity for further information on how to use this parameter."
    )
  ),
  #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536"(value: ri!entityType),
  fn!error(
    concat(
      "Null `entityType` passed to AS_CO_UT_queryEntity for entity `",
      ri!entity,
      "`.  See documentation in AS_CO_UT_queryEntity for further information on how to use this parameter."
    )
  ),
  and(
    ri!returnType = #"_a-0000e415-3035-8000-9bb2-011c48011c48_290131",
    #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536"(value: ri!pagingInfo)
  ),
  fn!error(
    concat(
      "`pagingInfo` is required (cannot be null) for `returnType` DATA_SUBSET"
    )
  ),
  and(
    ri!returnType &lt;&gt; #"_a-0000e415-3035-8000-9bb2-011c48011c48_290131",
    #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782"(input: ri!pagingInfo)
  ),
  fn!error(
    concat(
      "`pagingInfo` must be null when the `returnType` is not DATA_SUBSET, instead use `sort` to pass custom-sorting and `startIndex` &amp; `batchSize` will be automatically calculated for you"
    )
  ),
  and(
    ri!returnType = #"_a-0000e415-3035-8000-9bb2-011c48011c48_290169",
    #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536"(value: ri!aggregation)
  ),
  fn!error(
    "You must provide an input for `aggregation` when `returnType` is AGGREGATION"
  ),
  and(
    ri!returnType &lt;&gt; #"_a-0000e415-3035-8000-9bb2-011c48011c48_290169",
    #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782"(input: ri!aggregation)
  ),
  fn!error(
    "You cannot provide an input for `aggregation` when `returnType` is not AGGREGATION"
  ),
  a!localVariables(
    /*Determine the castResultToType*/
    local!castResultToType: #"_a-0000e3e6-fb42-8000-9ba5-011c48011c48_187421"(
      value: ri!returnType,
      inArray: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290200"(),
      replacement: {
        /*DATA_SUBSET*/'type!{http://www.appian.com/ae/types/2009}DataSubset',
        /*SINGLE_OBJECT*/ri!entityType,
        /*OBJECT_ARRAY*/#"_a-0000e3ff-a5bc-8000-9ba8-011c48011c48_39610"(type: ri!entityType),
        /*AGGREGATION*/'type!{http://www.appian.com/ae/types/2009}Map?list',
        /*TOTAL_COUNT*/'type!{http://www.appian.com/ae/types/2009}Integer',
        
      }
    ),
    /*Determine the batchSize*/
    local!batchSize: #"_a-0000e3e6-fb42-8000-9ba5-011c48011c48_187421"(
      value: ri!returnType,
      inArray: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290200"(),
      replacement: {
        /*DATA_SUBSET*/ri!pagingInfo.batchSize,
        /*SINGLE_OBJECT*/1,
        /*OBJECT_ARRAY*/#"_a-0000e3e6-fb42-8000-9ba5-011c48011c48_225990",
        /*AGGREGATION*/#"_a-0000e3e6-fb42-8000-9ba5-011c48011c48_225990",
        /*TOTAL_COUNT*/0,
        
      }
    ),
    /*Determine the sort*/
    local!sort: #"_a-0000e52f-5316-8000-9bac-011c48011c48_303936"(
      entityType: ri!entityType,
      returnType: ri!returnType,
      pagingInfo: ri!pagingInfo,
      sort: ri!sort
    ),
    /*Determine the pagingInfo*/
    local!pagingInfo: if(
      ri!returnType = #"_a-0000e415-3035-8000-9bb2-011c48011c48_290131",
      /*Use specific pagingInfo for DATA_SUBSET*/
      #"SYSTEM_SYSRULES_pagingInfo"(
        startIndex: ri!pagingInfo.startIndex,
        batchSize: ri!pagingInfo.batchSize,
        sort: local!sort
      ),
      /*Otherwise calculate pagingInfo for all other returnTypes*/
      #"SYSTEM_SYSRULES_pagingInfo"(
        startIndex: 1,
        batchSize: local!batchSize,
        sort: local!sort
      )
    ),
    /*Determine the fetchTotalCount*/
    local!fetchTotalCount: #"_a-0000e3e6-fb42-8000-9ba5-011c48011c48_187421"(
      value: ri!returnType,
      inArray: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290200"(),
      replacement: {
        /*DATA_SUBSET*/true,
        /*SINGLE_OBJECT*/false,
        /*OBJECT_ARRAY*/false,
        /*AGGREGATION*/false,
        /*TOTAL_COUNT*/true,
        
      }
    ),
    /*Execute the query*/
    local!queryResult: a!refreshVariable(
      value: if(
        ri!executeWhen = false,
        null,
        #"SYSTEM_SYSRULES_queryEntity_v1"(
          entity: ri!entity,
          fetchTotalCount: local!fetchTotalCount,
          query: #"SYSTEM_SYSRULES_query"(
            pagingInfo: local!pagingInfo,
            aggregation: ri!aggregation,
            selection: if(
              and(
                ri!excludeNestedCdts = true,
                #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536"(ri!aggregation)
              ),
              #"SYSTEM_SYSRULES_querySelection"(
                columns: #"SYSTEM_SYSRULES_forEach"(
                  items: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75660"(
                    type: ri!entityType,
                    onlyPrimitiveFields: true
                  ),
                  expression: #"SYSTEM_SYSRULES_queryColumn"(field: fv!item)
                )
              ),
              null
            ),
            logicalExpression: #"SYSTEM_SYSRULES_queryLogicalExpression"(
              operator: "AND",
              logicalExpressions: {
                #"SYSTEM_SYSRULES_queryLogicalExpression"(
                  operator: "AND",
                  ignoreFiltersWithEmptyValues: true,
                  filters: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73980"(
                    nullableValue: ri!filters,
                    replacementValue: {}
                  )
                ),
                #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73980"(
                  nullableValue: ri!logicalExpression,
                  replacementValue: {}
                )
              }
            )
          )
        )
      ),
      refreshOnVarChange: ri!triggerRefresh,
      refreshAfter: { "RECORD_ACTION" }
    ),
    /*Parse the queryResult*/
    local!queryResultParse: choose(
      #"_a-0000e40a-de32-8000-9ba8-011c48011c48_280802"(
        value: ri!returnType,
        inArray: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290200"()
      ),
      /*Default, required value based on how AS_CO_UT_chooseWherecontainsHelper operates*/"",
      /*DATA_SUBSET*/local!queryResult,
      /*SINGLE_OBJECT*/local!queryResult.data,
      /*OBJECT_ARRAY*/local!queryResult.data,
      /*AGGREGATION*/local!queryResult.data,
      /*TOTAL_COUNT*/local!queryResult.totalCount,
      
    ),
    #"_a-0000e3e6-fb42-8000-9ba5-011c48011c48_157603"(
      type: local!castResultToType,
      value: local!queryResultParse
    )
  )
)/*

DOCUMENTATION

This rule is designed to minimize the overhead with querying data and then casting the result


Required Inputs:

1. entity 
- This is the data store entity you are querying
-- e.g. cons!AS_DATA_STORE_ENTITY_CASES

2. entityType
- This is a type! input of the data type which maps to the underlying data store entity
- Note that your type! input should not end in parenthesis; this is NOT designed to take in an empty CDT
-- e.g. 'type!{urn:com:appian:types}Case'

3. returnType
- This depends on the purpose for the query, and should be one of the returnTypes in rule!AS_CO_CONS_QE_RETURN_TYPES
-- DATA_SUBSET - This will return a DataSubset; pagingInfo is required
-- SINGLE_OBJECT - This will return a single CDT whose type is the entityType; pagingInfo must be null
-- ARRAY_OBJECT - This will return an array of CDTs whos type is an array of the entityType; pagingInfo must be null
-- AGGREGATION - This will return an array of Dictionaries; pagingInfo must be null
---- NOTE: If you need Aggregation with paging controls, such as for a grid, use returnType DATA_SUBSET
-- TOTAL_COUNT - This will return an Integer of the total count; pagingInfo must be null


Optional Inputs:

4. executeWhen
- The query will not execute if this is false, the query will execute if this is true or null
-- This is meant to operate in a similar manner to the showWhen parameter of components
- Use this to skip execution of a query without needing to wrap if() statements around the rule
-- Examples of this would be to skip querying if your filter value is a null ID
- If the query does not execute, this will return a null value whose type is based on the returnType input

5. triggerRefresh
- By default, the query will always re-execute whenever any inputs change
- However, by updating the value of triggerRefresh, you can also trigger a re-execution even if none of the other inputs change

6. excludeNestedCdts
- When true, this will exclude all nested CDTs from the query selection, and only include primitive fields
- When false or null, all fields will be included in the query, including all nested CDTs

7. filters
- Array of filters to apply to the query, built with a!queryFilter()
- These filters will be applied with an AND operator
- These filters will apply in addition to the logicalExpression input, combining both with an AND operator

8. logicalExpression
- A logical expression to apply to the query, built with a!queryLogicalExpression()
- This logical expression will apply in addition to the filters input, combining both with an AND operator

9. aggregation
- Aggregation to apply to the query, built with a!queryAggregation()

10. pagingInfo
- Paging info to apply to the query, built with a!pagingInfo() or derived from fv!pagingInfo in grids
- This is required if passing returnType DATA_SUBSET, otherwise it must be null
- For returnTypes that are not DATA_SUBSET, the batch size will be automatically calculated depending on the returnType
-- For example, passing SINGLE_OBJECT will automatically apply a batch size of 1, whereas ARRAY_OBJECT and AGGREGATION will automatically apply a batch size of -1

11. sort
- Array of sort to apply to the query, built with a!sortInfo()
- This is meant to be used with returnType ARRAY_OBJECT and AGGREGATION, since pagingInfo is not required for these, but a specified sort may be used
- If both sort and pagingInfo.sort are passed with valid values, they will be applied in conjuction, with the sort parameter being the primary sort

*/</definition>
        <namedTypedValue>
            <name>entity</name>
            <type>
                <name>DataStoreEntity</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>entityType</name>
            <type>
                <name>Variant</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>returnType</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>executeWhen</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>triggerRefresh</name>
            <type>
                <name>dateTime</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>excludeNestedCdts</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>filters</name>
            <type>
                <name>Variant</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>logicalExpression</name>
            <type>
                <name>Variant</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>aggregation</name>
            <type>
                <name>Variant</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>pagingInfo</name>
            <type>
                <name>PagingInfo</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>sort</name>
            <type>
                <name>SortInfo?list</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>legacy</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
    </rule>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name>DATA_SUBSET</a:name>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:DataStoreEntity"/>
                    <a:nameRef>entity</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">typeof({a: 1})</a:value>
                    <a:nameRef>entityType</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"_a-0000e415-3035-8000-9bb2-011c48011c48_290131"</a:value>
                    <a:nameRef>returnType</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>executeWhen</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:dateTime"/>
                    <a:nameRef>triggerRefresh</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>excludeNestedCdts</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>filters</a:nameRef>
                    <a:id>7</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>logicalExpression</a:nameRef>
                    <a:id>8</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>aggregation</a:nameRef>
                    <a:id>9</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"SYSTEM_SYSRULES_pagingInfo"()</a:value>
                    <a:nameRef>pagingInfo</a:nameRef>
                    <a:id>10</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>sort</a:nameRef>
                    <a:id>11</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions>
                    <a:expectedOutput>
                        <a:type a:uuid="{http://www.appian.com/ae/types/2009}Variant"/>
                        <a:runtimeType a:uuid="{http://www.appian.com/ae/types/2009}Variant"/>
                        <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">cast(
  'type!{http://www.appian.com/ae/types/2009}DataSubset',
  null
)</a:value>
                    </a:expectedOutput>
                </a:assertions>
            </el>
            <el>
                <a:name>SINGLE_OBJECT</a:name>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:DataStoreEntity"/>
                    <a:nameRef>entity</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">typeof({a: 1})</a:value>
                    <a:nameRef>entityType</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"_a-0000e415-3035-8000-9bb2-011c48011c48_290157"</a:value>
                    <a:nameRef>returnType</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>executeWhen</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:dateTime"/>
                    <a:nameRef>triggerRefresh</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>excludeNestedCdts</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>filters</a:nameRef>
                    <a:id>7</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>logicalExpression</a:nameRef>
                    <a:id>8</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>aggregation</a:nameRef>
                    <a:id>9</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:PagingInfo"/>
                    <a:nameRef>pagingInfo</a:nameRef>
                    <a:id>10</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>sort</a:nameRef>
                    <a:id>11</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions>
                    <a:expectedOutput>
                        <a:type a:uuid="{http://www.appian.com/ae/types/2009}Variant"/>
                        <a:runtimeType a:uuid="{http://www.appian.com/ae/types/2009}Variant"/>
                        <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">cast(
  typeof({a: 1}),
  null
)</a:value>
                    </a:expectedOutput>
                </a:assertions>
            </el>
            <el>
                <a:name>OBJECT_ARRAY</a:name>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:DataStoreEntity"/>
                    <a:nameRef>entity</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">typeof({a: 1})</a:value>
                    <a:nameRef>entityType</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"_a-0000e415-3035-8000-9bb2-011c48011c48_290163"</a:value>
                    <a:nameRef>returnType</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>executeWhen</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:dateTime"/>
                    <a:nameRef>triggerRefresh</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>excludeNestedCdts</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>filters</a:nameRef>
                    <a:id>7</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>logicalExpression</a:nameRef>
                    <a:id>8</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>aggregation</a:nameRef>
                    <a:id>9</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:PagingInfo"/>
                    <a:nameRef>pagingInfo</a:nameRef>
                    <a:id>10</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>sort</a:nameRef>
                    <a:id>11</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions>
                    <a:expectedOutput>
                        <a:type a:uuid="{http://www.appian.com/ae/types/2009}Variant"/>
                        <a:runtimeType a:uuid="{http://www.appian.com/ae/types/2009}Variant"/>
                        <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">cast(
  typeof({{a: 1}}),
  {}
)</a:value>
                    </a:expectedOutput>
                </a:assertions>
            </el>
            <el>
                <a:name>AGGREGATION</a:name>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:DataStoreEntity"/>
                    <a:nameRef>entity</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">typeof({a: 1})</a:value>
                    <a:nameRef>entityType</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"_a-0000e415-3035-8000-9bb2-011c48011c48_290169"</a:value>
                    <a:nameRef>returnType</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>executeWhen</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:dateTime"/>
                    <a:nameRef>triggerRefresh</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>excludeNestedCdts</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>filters</a:nameRef>
                    <a:id>7</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>logicalExpression</a:nameRef>
                    <a:id>8</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"SYSTEM_SYSRULES_queryAggregation"(
  aggregationColumns: {
    #"SYSTEM_SYSRULES_queryAggregationColumn"(field: "a", isGrouping: true)
  }
)</a:value>
                    <a:nameRef>aggregation</a:nameRef>
                    <a:id>9</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:PagingInfo"/>
                    <a:nameRef>pagingInfo</a:nameRef>
                    <a:id>10</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>sort</a:nameRef>
                    <a:id>11</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions>
                    <a:expectedOutput xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:resultAssertions>typeof(test!output)=typeof({a!map()})</a:resultAssertions>
                </a:assertions>
            </el>
            <el>
                <a:name>TOTAL_COUNT</a:name>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:DataStoreEntity"/>
                    <a:nameRef>entity</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">typeof({a: 1})</a:value>
                    <a:nameRef>entityType</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"_a-0000e415-3035-8000-9bb2-011c48011c48_290175"</a:value>
                    <a:nameRef>returnType</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>executeWhen</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:dateTime"/>
                    <a:nameRef>triggerRefresh</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:boolean"/>
                    <a:nameRef>excludeNestedCdts</a:nameRef>
                    <a:id>6</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>filters</a:nameRef>
                    <a:id>7</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>logicalExpression</a:nameRef>
                    <a:id>8</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>aggregation</a:nameRef>
                    <a:id>9</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:PagingInfo"/>
                    <a:nameRef>pagingInfo</a:nameRef>
                    <a:id>10</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
                    <a:nameRef>sort</a:nameRef>
                    <a:id>11</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions>
                    <a:expectedOutput>
                        <a:type a:uuid="{http://www.appian.com/ae/types/2009}Variant"/>
                        <a:runtimeType a:uuid="{http://www.appian.com/ae/types/2009}Variant"/>
                        <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">cast(
  'type!{http://www.appian.com/ae/types/2009}Integer',
  null
)</a:value>
                    </a:expectedOutput>
                </a:assertions>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e3e6-fb42-8000-9ba5-011c48011c48_157903"/>
        <historyInfo versionUuid="_a-0000e3e6-fb42-8000-9ba5-011c48011c48_166004"/>
        <historyInfo versionUuid="_a-0000e415-3035-8000-9bb2-011c48011c48_291372"/>
        <historyInfo versionUuid="_a-0000e412-58a2-8000-9ba4-011c48011c48_10396"/>
        <historyInfo versionUuid="_a-0000e3ff-a5bc-8000-9ba8-011c48011c48_41313"/>
        <historyInfo versionUuid="_a-0000e41f-788a-8000-9ba9-011c48011c48_54459"/>
        <historyInfo versionUuid="_a-0000e430-f270-8000-9bbc-011c48011c48_335190"/>
        <historyInfo versionUuid="_a-0000e412-58a2-8000-9ba4-011c48011c48_10445"/>
        <historyInfo versionUuid="_a-0000e430-f278-8000-9ba6-011c48011c48_11677"/>
        <historyInfo versionUuid="_a-0000e430-f278-8000-9ba6-011c48011c48_11811"/>
        <historyInfo versionUuid="_a-0000e430-f278-8000-9ba6-011c48011c48_11901"/>
        <historyInfo versionUuid="_a-0000e430-f270-8000-9bbc-011c48011c48_371665"/>
        <historyInfo versionUuid="_a-0000e438-ff39-8000-9ba8-011c48011c48_15288"/>
        <historyInfo versionUuid="_a-0000e438-fdf5-8000-9ba8-011c48011c48_19437"/>
        <historyInfo versionUuid="_a-0000e447-933d-8000-9baa-011c48011c48_37066"/>
        <historyInfo versionUuid="_a-0000e52f-5316-8000-9bac-011c48011c48_217672"/>
        <historyInfo versionUuid="_a-0000e52f-5316-8000-9bac-011c48011c48_304240"/>
        <historyInfo versionUuid="_a-0000e52f-5316-8000-9bac-011c48011c48_304756"/>
        <historyInfo versionUuid="_a-0000e52f-5316-8000-9bac-011c48011c48_304918"/>
        <historyInfo versionUuid="_a-0000e5a0-53e9-8000-9bd8-011c48011c48_1470270"/>
        <historyInfo versionUuid="_a-0000e607-97fd-8000-9be9-011c48011c48_1678132"/>
        <historyInfo versionUuid="_a-0000e62c-7375-8000-9bec-011c48011c48_1806001"/>
        <historyInfo versionUuid="_a-0000e62c-7375-8000-9bec-011c48011c48_1869341"/>
        <historyInfo versionUuid="_a-0000e6e2-62e5-8000-9bfe-011c48011c48_2361604"/>
    </history>
</contentHaul>
