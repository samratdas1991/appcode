<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e79b-0335-8000-9c0c-011c48011c48_3024709</versionUuid>
    <rule>
        <name>AS_IO_BL_constructDocumentReconciliationTask</name>
        <uuid>_a-0000e539-6d59-8000-9bd0-011c48011c48_1273099</uuid>
        <description>Constructs the document reconciliation task </description>
        <parentUuid>_a-0000e2bb-4188-8000-9ba2-011c48011c48_25469</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  local!documentReconciliationTaskRef: #"_a-0000e393-fbf1-8000-9ba2-011c48011c48_113793"(
    behaviorSubtypeCode: #"_a-0000e539-6d59-8000-9bd0-011c48011c48_1273105",
    returnType: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290157"
  ),
  local!assigneeMap: if(
    #"_a-0000e2cd-bc96-8000-9ba2-011c48011c48_114114"(
      user: ri!customerDocModifiedBy,
      groups: #"_a-0000e539-6d59-8000-9bd0-011c48011c48_1296974"
    ),
    a!map(
      userAssignee: a!localVariables(
        local!primaryOwnerUsername: #"_a-0000e6e2-62e5-8000-9bfe-011c48011c48_2501604"(
          returnType: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290157",
          requestId: ri!requestId,
          fields: #"urn:appian:record-field:v1:04c66223-4089-4d5e-8ed8-6a853822f478/6ce2159e-c78e-4bc7-95f4-a37e221b9812/ef27eabb-7afc-400f-acd7-824ff3c0693d"
        )[#"urn:appian:record-field:v1:04c66223-4089-4d5e-8ed8-6a853822f478/6ce2159e-c78e-4bc7-95f4-a37e221b9812/ef27eabb-7afc-400f-acd7-824ff3c0693d"],
        a!defaultValue(
          local!primaryOwnerUsername,
          #"_a-0000e6ca-7e19-8000-9bfb-011c48011c48_2239124"(
            onboardingRequestIds: ri!requestId,
            returnType: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290157"
          )[#"urn:appian:record-field:v1:1bc6764d-cb19-4d4e-8177-8ffba175376a/ef27eabb-7afc-400f-acd7-824ff3c0693d"]
        )
      ),
      groupAssignee: #"_a-0000e438-fd8a-8000-9bbe-011c48011c48_411694"
    ),
    a!localVariables(
      /* Query in case reconciliation is for document upload task
      Otherwise we will replace the null groupAssignee below  */
      local!documentUploadTask: #"_a-0000e393-fbf1-8000-9ba2-011c48011c48_104148"(
        returnType: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290157",
        onboardingDocumentId: ri!onboardingDocumentId,
        executeWhen: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782"(ri!onboardingDocumentId)
      ),
      a!map(
        userAssignee: ri!customerDocModifiedBy,
        groupAssignee: if(
          #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536"(
            value: local!documentUploadTask.groupAssignee
          ),
          index(
            #"_a-0000e79b-0335-8000-9c0c-011c48011c48_3019012"(
              user: ri!customerDocModifiedBy,
              parentGroup: #"_a-0000e586-af6f-8000-9bd2-011c48011c48_1336333",
              onlyCheckDirectMemberGroupsOfParent: true
            ),
            1,
            #"_a-0000e438-fd8a-8000-9bbe-011c48011c48_411694"
          ),
          local!documentUploadTask.groupAssignee
        )
      )
    )
  ),
  #"_a-0000e40a-de32-8000-9ba8-011c48011c48_260165"(
    cdt: #"_a-0000e3e6-fb42-8000-9ba5-011c48011c48_193601"(
      taskRef: local!documentReconciliationTaskRef
    ),
    fields: {
      "groupAssignee",
      "dueDate",
      "userAssignee",
      "taskStatus.taskStatusId",
      "availableDatetime",
      "request.requestId",
      "docUnderstanding",
      "slaDays",
      "slaRule"
    },
    newValues: {
      local!assigneeMap.groupAssignee,
      today() + 5,
      local!assigneeMap.userAssignee,
      #"_a-0000e460-9d93-8000-9bc1-011c48011c48_603236",
      now(),
      ri!requestId,
      ri!docUnderstanding,
      10,
      #"_a-0000e460-9d93-8000-9bc1-011c48011c48_620337"
    }
  )
)</definition>
        <namedTypedValue>
            <name>customerDocModifiedBy</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>docUnderstanding</name>
            <type>
                <name>AS_FS_IDP_DocUnderstanding</name>
                <namespace>urn:com:appian:types:AS:FS</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>requestId</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>onboardingDocumentId</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>legacy</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
    </rule>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name>Unnamed Test Case</a:name>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">"annika.basch"</a:value>
                    <a:nameRef>customerDocModifiedBy</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"_a-0000e539-6d59-8000-9bd0-011c48011c48_1261636"(docTypeId: 1, returnType: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290157")</a:value>
                    <a:nameRef>docUnderstanding</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">2</a:value>
                    <a:nameRef>requestId</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:int"/>
                    <a:nameRef>onboardingDocumentId</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e586-af6f-8000-9bd2-011c48011c48_1334965"/>
        <historyInfo versionUuid="_a-0000e586-af6f-8000-9bd2-011c48011c48_1341728"/>
        <historyInfo versionUuid="_a-0000e586-af6f-8000-9bd2-011c48011c48_1378262"/>
        <historyInfo versionUuid="_a-0000e5a0-53e9-8000-9bd8-011c48011c48_1400900"/>
        <historyInfo versionUuid="_a-0000e5a0-53e9-8000-9bd8-011c48011c48_1402306"/>
        <historyInfo versionUuid="_a-0000e5d6-d648-8000-9bde-011c48011c48_1494275"/>
        <historyInfo versionUuid="_a-0000e62c-7375-8000-9bec-011c48011c48_1744469"/>
        <historyInfo versionUuid="_a-0000e673-a4a7-8000-9bef-011c48011c48_2011126"/>
        <historyInfo versionUuid="_a-0000e70f-2824-8000-9c01-011c48011c48_2724217"/>
        <historyInfo versionUuid="_a-0000e79b-0335-8000-9c0c-011c48011c48_3024709"/>
    </history>
</contentHaul>
