<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e811-1167-8000-9c18-011c48011c48_3504354</versionUuid>
    <interface>
        <name>AS_IO_COL_customerPortalViewRequiredOnboardingDocs</name>
        <uuid>_a-0000e586-af6f-8000-9bd2-011c48011c48_1339180</uuid>
        <description>Column layout holding onboarding docs in Customer portal</description>
        <parentUuid>_a-0000e4b1-2fbc-8000-9bc6-011c48011c48_968428</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>a!localVariables(
  local!triggerRefresh: a!refreshVariable(
    value: now(),
    refreshAfter: "RECORD_ACTION"
  ),
  local!refData: #"_a-0000e2cd-bc96-8000-9ba2-011c48011c48_39864"(
    typeList: { #"_a-0000e50d-bf1d-8000-9bcd-011c48011c48_975321" },
    i18nData: ri!i18nData
  ),
  local!documentStatusMapping: #"_a-0000e70f-2824-8000-9c01-011c48011c48_2794398"(),
  /*Sorting to be added*/
  local!paging: a!refreshVariable(
    value: #"SYSTEM_SYSRULES_pagingInfo"(
      startIndex: 1,
      batchSize: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73142"
    ),
    /*refresh paging on record action and filter update*/
    refreshOnVarChange: { local!triggerRefresh }
  ),
  /*query all of the onboarding's required documents of the appropriate statuses*/
  local!requiredDocuments: #"_a-0000e79b-0335-8000-9c0c-011c48011c48_3029015"(
    requestId: ri!requestId,
    returnType: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290163",
    triggerRefresh: local!triggerRefresh,
    additionalLogicalExpressions: #"SYSTEM_SYSRULES_queryLogicalExpression"(
      operator: "OR",
      filters: {
        #"SYSTEM_SYSRULES_queryFilter"(
          field: #"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/16d8f46b-6e98-47fd-bbd9-c1623b4afbab/4756c7ad-6134-48ea-819e-328cfd66be96/d4e6e9a8-74d1-4dbe-9934-a56e8a2500db",
          operator: "&lt;&gt;",
          value: true()
        ),
        #"SYSTEM_SYSRULES_queryFilter"(
          field: #"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/13d158a8-e0d7-4dcd-9402-fed933921040",
          operator: "is null"
        )
      }
    )/* We dont want required documents for which the documents are marked as internal   */
    
  ),
  /*filter into upload, reconciliation, and review task types*/
  /*Note - if more task types are added, this will need to be updated*/
  local!requiredDocsWithUploadTasks: #"_a-0000e70f-2824-8000-9c01-011c48011c48_2594908"(
    cdt: local!requiredDocuments,
    fields: {
      #"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/13d158a8-e0d7-4dcd-9402-fed933921040",
      #"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/16d8f46b-6e98-47fd-bbd9-c1623b4afbab/b347fb34-4eb9-465b-9cc8-a0c217a75e41"
    },
    values: {
      null,
      {
        #"_a-0000e70f-2824-8000-9c01-011c48011c48_2774620",
        #"_a-0000e36c-7599-8000-9ba2-011c48011c48_48067"
      }
    }
  ),
  local!requiredDocsWithReconciliationTasks: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75800"(
    cdt: local!requiredDocuments,
    field: #"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/16d8f46b-6e98-47fd-bbd9-c1623b4afbab/b347fb34-4eb9-465b-9cc8-a0c217a75e41",
    value: {
      #"_a-0000e70f-2824-8000-9c01-011c48011c48_2774627",
      
    }
  ),
  local!requiredDocsWithOpenReviewTasks: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75800"(
    cdt: local!requiredDocuments,
    field: #"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/16d8f46b-6e98-47fd-bbd9-c1623b4afbab/b347fb34-4eb9-465b-9cc8-a0c217a75e41",
    value: {
      #"_a-0000e539-6d59-8000-9bd0-011c48011c48_1290786",
      #"_a-0000e70f-2824-8000-9c01-011c48011c48_2774613"
    }
  ),
  local!requiredDocsWithClosedReviewTasks: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75800"(
    cdt: local!requiredDocuments,
    field: #"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/16d8f46b-6e98-47fd-bbd9-c1623b4afbab/b347fb34-4eb9-465b-9cc8-a0c217a75e41",
    value: {
      #"_a-0000e70f-2824-8000-9c01-011c48011c48_2777404"
    }
  ),
  /*query for upload and review tasks with the appropriate assignees*/
  local!uploadTasks: #"_a-0000e77d-004e-8000-9c08-011c48011c48_2838310"(
    requestId: ri!requestId,
    returnType: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290163",
    fields: {
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322",
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322/16d8f46b-6e98-47fd-bbd9-c1623b4afbab",
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/2cd5f4a0-b409-4bdc-9f44-6e4e390ffd82"
    },
    triggerRefresh: local!triggerRefresh,
    behaviorSubtypeCode: #"_a-0000e393-fbf1-8000-9ba2-011c48011c48_99647",
    requiredDocumentIds: local!requiredDocsWithUploadTasks[#"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/77c55940-2bbf-4ab5-9883-23836a770c8f"],
    /*we only want "assigned" upload tasks*/
    taskStatusIds: { #"_a-0000e460-9d93-8000-9bc1-011c48011c48_603236" },
    executeWhen: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782"(
      local!requiredDocsWithUploadTasks[#"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/77c55940-2bbf-4ab5-9883-23836a770c8f"]
    ),
    sort: {
      #"SYSTEM_SYSRULES_sortInfo"(
        field: #"urn:appian:record-field:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/58a8f13e-7f46-49da-b15a-beed1f794261",
        ascending: true
      )
    }
  ),
  local!reconciliationTasks: #"_a-0000e77d-004e-8000-9c08-011c48011c48_2838310"(
    requestId: ri!requestId,
    returnType: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290163",
    fields: {
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322",
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322/16d8f46b-6e98-47fd-bbd9-c1623b4afbab",
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/2cd5f4a0-b409-4bdc-9f44-6e4e390ffd82"
    },
    triggerRefresh: local!triggerRefresh,
    behaviorSubtypeCode: #"_a-0000e539-6d59-8000-9bd0-011c48011c48_1273105",
    requiredDocumentIds: local!requiredDocsWithReconciliationTasks[#"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/77c55940-2bbf-4ab5-9883-23836a770c8f"],
    /*we only want "assigned" reconciliation tasks*/
    taskStatusIds: { #"_a-0000e460-9d93-8000-9bc1-011c48011c48_603236" },
    executeWhen: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782"(
      local!requiredDocsWithReconciliationTasks[#"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/77c55940-2bbf-4ab5-9883-23836a770c8f"]
    ),
    sort: {
      #"SYSTEM_SYSRULES_sortInfo"(
        field: #"urn:appian:record-field:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/58a8f13e-7f46-49da-b15a-beed1f794261",
        ascending: true
      )
    }
  ),
  local!openReviewTasks: #"_a-0000e77d-004e-8000-9c08-011c48011c48_2838310"(
    requestId: ri!requestId,
    returnType: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290163",
    fields: {
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322",
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322/16d8f46b-6e98-47fd-bbd9-c1623b4afbab",
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/2cd5f4a0-b409-4bdc-9f44-6e4e390ffd82"
    },
    triggerRefresh: local!triggerRefresh,
    behaviorSubtypeCode: #"_a-0000e79b-0335-8000-9c0c-011c48011c48_3040883",
    requiredDocumentIds: local!requiredDocsWithOpenReviewTasks[#"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/77c55940-2bbf-4ab5-9883-23836a770c8f"],
    /*we only want "assigned" review tasks for review and classification*/
    taskStatusIds: { #"_a-0000e460-9d93-8000-9bc1-011c48011c48_603236" },
    executeWhen: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782"(
      local!requiredDocsWithOpenReviewTasks[#"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/77c55940-2bbf-4ab5-9883-23836a770c8f"]
    ),
    sort: {
      #"SYSTEM_SYSRULES_sortInfo"(
        field: #"urn:appian:record-field:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/58a8f13e-7f46-49da-b15a-beed1f794261",
        ascending: true
      )
    }
  ),
  local!closedReviewTasks: #"_a-0000e77d-004e-8000-9c08-011c48011c48_2838310"(
    requestId: ri!requestId,
    returnType: #"_a-0000e415-3035-8000-9bb2-011c48011c48_290163",
    fields: {
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322",
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322/16d8f46b-6e98-47fd-bbd9-c1623b4afbab",
      #"urn:appian:record-relationship:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/2cd5f4a0-b409-4bdc-9f44-6e4e390ffd82"
    },
    triggerRefresh: local!triggerRefresh,
    behaviorSubtypeCode: #"_a-0000e79b-0335-8000-9c0c-011c48011c48_3040883",
    requiredDocumentIds: local!requiredDocsWithClosedReviewTasks[#"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/77c55940-2bbf-4ab5-9883-23836a770c8f"],
    /*we only want "complete" review tasks for approved docs*/
    taskStatusIds: { #"_a-0000e460-9d93-8000-9bc1-011c48011c48_603248" },
    executeWhen: #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75782"(
      local!requiredDocsWithClosedReviewTasks[#"urn:appian:record-field:v1:ee29c681-ea9f-4298-8113-51be93d69017/77c55940-2bbf-4ab5-9883-23836a770c8f"]
    ),
    sort: {
      #"SYSTEM_SYSRULES_sortInfo"(
        field: #"urn:appian:record-field:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/58a8f13e-7f46-49da-b15a-beed1f794261",
        ascending: true
      )
    }
  ),
  local!tasks: {
    /*some upload tasks (missing) will not have a service request doc, so we can't sort on docStatusCode*/
    /*sort upload tasks so rejected docs are shown first*/
    #"_a-0000e40a-de32-8000-9ba8-011c48011c48_271202"(
      cdt: local!uploadTasks,
      field: #"urn:appian:record-field:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322/13d158a8-e0d7-4dcd-9402-fed933921040",
      value: null
    ),
    #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75800"(
      cdt: local!uploadTasks,
      field: #"urn:appian:record-field:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322/13d158a8-e0d7-4dcd-9402-fed933921040",
      value: null
    ),
    /*display tasks in order based on their document status*/
    #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_75708"(
      cdt: {
        local!reconciliationTasks,
        local!openReviewTasks,
        local!closedReviewTasks
      },
      field: #"urn:appian:record-field:v1:31b77cbe-8b51-41ba-927f-f11ee2d7fd33/4017ef22-bbb1-4860-999b-9b3827698322/16d8f46b-6e98-47fd-bbd9-c1623b4afbab/b347fb34-4eb9-465b-9cc8-a0c217a75e41",
      array: #"_a-0000e70f-2824-8000-9c01-011c48011c48_2794398"().status
    )
  },
  /*create subset of requirements for display*/
  local!tasksSubset: a!refreshVariable(
    value: todatasubset(
      arrayToPage: local!tasks,
      pagingConfiguration: local!paging
    ),
    refreshAfter: "RECORD_ACTION"
  ),
  #"SYSTEM_SYSRULES_columnLayout"(
    contents: {
      #"SYSTEM_SYSRULES_richTextDisplayField"(
        label: "",
        labelPosition: "COLLAPSED",
        value: {
          #"SYSTEM_SYSRULES_richTextItem_v1"(
            text: {
              #"_a-0000e2cd-bc96-8000-9ba2-011c48011c48_81818"(
                i18nData: ri!i18nData,
                bundleKey: "AS.FS.AllBundles.lbl_DocumentsUpperCase"
              )
            },
            color: "ACCENT",
            size: "MEDIUM",
            style: "STRONG"
          )
        }
      ),
      if(
        #"_a-0000e2ad-62e7-8000-9ba2-011c48011c48_73536"(local!requiredDocuments),
        #"SYSTEM_SYSRULES_cardLayout"(
          contents: {
            #"_a-0000e607-97fd-8000-9be9-011c48011c48_1671902"(
              icon: "file-o",
              iconSize: "TINY",
              align: "CENTER",
              text: #"_a-0000e2cd-bc96-8000-9ba2-011c48011c48_81818"(
                i18nData: ri!i18nData,
                bundleKey: "AS.FS.AllBundles.txt_NoOpenDocuments"
              ),
              backgroundColor: "SECONDARY",
              textColor: "SECONDARY"
            )
          },
          height: "AUTO",
          style: "NONE",
          marginBelow: "STANDARD",
          showBorder: false,
          showShadow: true
        ),
        {
          #"SYSTEM_SYSRULES_forEach"(
            items: local!tasksSubset.data,
            expression: #"_a-0000e79b-0335-8000-9c0c-011c48011c48_3027869"(
              refData: local!refData,
              task: fv!item,
              i18nData: ri!i18nData,
              documentStatusMapping: local!documentStatusMapping
            )
          ),
          #"_a-0000e539-6d59-8000-9bd0-011c48011c48_1207543"(
            labelPosition: "COLLAPSED",
            align: "RIGHT",
            pagingInfo: local!paging,
            totalCount: local!tasksSubset.totalCount
          )
        }
      )
    },
    width: ri!columnWidth
  )
)</definition>
        <namedTypedValue>
            <name>requestId</name>
            <type>
                <name>int</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>columnWidth</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>i18nData</name>
            <type>
                <name>Variant</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
        <isCustom>false</isCustom>
    </interface>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:int">68</a:value>
                    <a:nameRef>requestId</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>columnWidth</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>i18nData</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e586-af6f-8000-9bd2-011c48011c48_1354136"/>
        <historyInfo versionUuid="_a-0000e586-af6f-8000-9bd2-011c48011c48_1356555"/>
        <historyInfo versionUuid="_a-0000e586-af6f-8000-9bd2-011c48011c48_1362631"/>
        <historyInfo versionUuid="_a-0000e586-af6f-8000-9bd2-011c48011c48_1373142"/>
        <historyInfo versionUuid="_a-0000e59f-bdcf-8000-9bd4-011c48011c48_1393220"/>
        <historyInfo versionUuid="_a-0000e5a0-53e9-8000-9bd8-011c48011c48_1396479"/>
        <historyInfo versionUuid="_a-0000e5a0-53e9-8000-9bd8-011c48011c48_1401356"/>
        <historyInfo versionUuid="_a-0000e5a0-53e9-8000-9bd8-011c48011c48_1401986"/>
        <historyInfo versionUuid="_a-0000e5a0-53e9-8000-9bd8-011c48011c48_1412276"/>
        <historyInfo versionUuid="_a-0000e607-97fd-8000-9be9-011c48011c48_1598914"/>
        <historyInfo versionUuid="_a-0000e607-97fd-8000-9be9-011c48011c48_1660630"/>
        <historyInfo versionUuid="_a-0000e607-97fd-8000-9be9-011c48011c48_1701835"/>
        <historyInfo versionUuid="_a-0000e62c-7375-8000-9bec-011c48011c48_1735640"/>
        <historyInfo versionUuid="_a-0000e62c-7375-8000-9bec-011c48011c48_1779431"/>
        <historyInfo versionUuid="_a-0000e62c-7375-8000-9bec-011c48011c48_1848087"/>
        <historyInfo versionUuid="_a-0000e69f-3688-8000-9bf2-011c48011c48_2152138"/>
        <historyInfo versionUuid="_a-0000e69f-3688-8000-9bf2-011c48011c48_2177759"/>
        <historyInfo versionUuid="_a-0000e70f-2824-8000-9c01-011c48011c48_2706301"/>
        <historyInfo versionUuid="_a-0000e811-1167-8000-9c18-011c48011c48_3497879"/>
        <historyInfo versionUuid="_a-0000e811-1167-8000-9c18-011c48011c48_3504354"/>
    </history>
</contentHaul>
